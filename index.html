<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Employee Rating Matrix</title>
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <div id="app-container">

    </div>
    <script src="js/auxfunctions.js"></script>
    <script src="js/data.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.0.1/react.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.0.1/react-dom.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.6.16/browser.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
    <script type="text/babel">
    var ScoreCardItem = React.createClass({
      render: function(){
        return (
          <div className="sc-item">
            <div className="sc-name">
              {this.props.item.name}
            </div>
            <div className="sc-score">
              {this.props.item.score}
            </div>
            <div className="sc-weight">
              {this.props.item.weight}
            </div>
          </div>
        );
      }
    });
    var ScoreCardPanel = React.createClass({
      render: function(){
        var scoreCardItems = this.props.scorecard.map( (e) =>
          <ScoreCardItem item={e}></ScoreCardItem>
        );
        return (
          <div>
            {scoreCardItems}
          </div>
        );
      }
    });
    var EvaluationPanel = React.createClass({
      render: function(){
        var corevalz = [];
        for (var k in this.props.coreVals){
          corevalz.push(<li className="core-li" key={k}>
            {k}<br />
            <input type="number" min="1" max="10" value={this.props.coreVals[k]}/>
          </li>  );
        }
        return (
          <div>
            <h1>{this.props.name}</h1>
            <h2>Core Values</h2>
            <ul className="core-values-panel">
              {corevalz}
            </ul>
            <hr />
            <h2>Score Card</h2>
            <ScoreCardPanel scorecard={this.props.scorecard}></ScoreCardPanel>
          </div>

        )
      }
    });
      var EvaluationList = React.createClass({
        render: function(){
          var evaluationPanels = this.props.evals.map(function(e){
            return (
              <EvaluationPanel key={generateId(e.name)} name={e.name}
                scorecard={e.scorecard} coreVals={e.coreVals} />
              );
          });
          return (
            <div className="evaluation-list-row">
              {evaluationPanels}
            </div>
          );
        }
      });
      var EvaluationApp = React.createClass({
        render: function(){
          return (
            <div>
              <EvaluationList coreVals={this.props.coreVals} evals={this.props.evals}/>
            </div>

          );
        }
      });
      ReactDOM.render(
        <EvaluationApp coreVals={coreValues} evals={evals}/>,
        document.getElementById("app-container")
      );
    </script>
  </body>
</html>
